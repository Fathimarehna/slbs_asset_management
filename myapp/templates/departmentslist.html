{% extends 'base.html' %}
{% load static %}

{% block content %}


<h1 class="text-dark text-center fw-bold  mt-5">Department Management</h1>
<br>


<div class="text-end px-4">
    <a href="{% url 'departments_create' %}" class="btn btn-danger">Add New department</a>
    <a href="{% url 'admin_dashboard' %}" class="btn btn-secondary">Back</a>
</div>
<br>
<br>

<table border="1" class="table table-secondary table-striped mx-auto" style="width: 1000px;">
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Status</th>
        <th>Created</th>
        <th>Updated</th>
        <th>Actions</th>
    </tr>
    {% for department in departments %}
    <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ department.title }}</td>


        <td>
            
            {% if department.status %}
                Active
            {% else %}
                Inactive
            {% endif %}
        </td>


        <td>{{ department.created_date }}</td>
        <td>{{ department.updated_date }}</td>
        <td>
                <a href="{% url 'departments_update' department.id %}" class="btn btn-sm btn-primary"><i class="fas fa-edit"></i>Edit</a>


                {% if department.status %}
                <!-- If active, show Soft Delete button -->
                <a href="{% url 'toggle_departments_status' department.id %}" class="btn btn-sm btn-warning">Deactivate</a>
                {% else %}
                <!-- If inactive, show Activate button -->
                <a href="{% url 'toggle_departments_status' department.id %}" class="btn btn-sm btn-success">Activate</a>
                {% endif %}

                <a href="{% url 'departments_delete' department.id %}" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i>Delete</a>

                
            </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}